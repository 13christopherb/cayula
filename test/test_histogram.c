


#include "unity.h"
#include <stdio.h>
#include "histogram.h"


void setUp(void)
{
}

void tearDown(void)
{
}

void test_get_histogram(void) {
    int arr[24] = {0,0,1,1,1,2,2,3,3,3,3,4,4,5,5,5,7,7,8,8,9,9,0,2};
    double histogram[256];
    get_histogram(arr, histogram, 24);
    double expected_arr[256] = {0};
    expected_arr[0] = 0.125;
    expected_arr[1] = 0.125;
    expected_arr[2] = 0.125;
    expected_arr[3] = 4.0/24.0;
    expected_arr[4] = 2.0/24.0;
    expected_arr[5] = 3.0/24.0;
    expected_arr[6] = 0.0;
    expected_arr[7] = 2.0/24.0;
    expected_arr[8] = 2.0/24.0;
    expected_arr[9] = 2.0/24.0;
    TEST_ASSERT_EQUAL_DOUBLE_ARRAY(expected_arr, histogram, 256);
}

void test_histogram_analysis(void) {
    int window[1024] = {
            3,33,68,84,70,69,91,17,56,30,96,86,37,65,22,72,42,95,13,25,32,12,99,62,13,2,21,99,50,73,16,95,49,90,79,
            56,94,50,69,57,9,0,95,95,79,70,7,74,80,49,93,45,66,88,98,14,36,51,25,13,76,41,61,39,89,6,90,89,30,82,54,
            72,1,3,17,68,13,30,7,52,75,8,39,24,75,11,56,80,99,79,52,75,41,70,56,60,28,62,44,10,83,67,6,23,62,14,16,34,
            6,76,40,15,19,94,4,16,75,15,83,7,0,10,47,30,59,21,98,9,94,37,73,46,12,47,4,11,11,43,63,57,73,75,72,36,66,9,
            56,32,83,57,91,30,34,9,80,22,66,7,95,27,68,18,20,67,93,84,91,6,26,51,55,16,12,20,43,35,81,66,1,88,83,38,60,
            68,85,24,69,8,60,46,46,46,9,22,86,33,9,17,86,41,59,40,52,15,25,69,6,40,5,36,22,49,91,73,85,35,11,61,64,93,4,
            3,78,32,44,32,63,93,86,72,97,91,36,21,67,52,5,71,76,16,92,67,10,78,49,64,15,81,97,47,12,65,94,83,66,70,2,66,
            63,37,73,22,99,93,18,25,99,37,86,48,47,29,9,13,16,94,66,1,15,80,94,90,29,68,4,94,44,91,38,63,38,82,86,78,99,
            85,80,21,10,3,78,54,41,76,70,47,32,69,44,73,69,6,80,42,19,94,2,86,37,81,66,99,38,8,9,31,14,66,54,57,88,48,28,
            28,37,22,59,0,72,26,64,75,96,43,86,82,29,79,54,63,53,52,42,17,35,56,40,30,1,78,81,47,69,87,13,35,4,48,23,30,
            44,59,55,74,79,20,55,92,39,30,75,36,47,0,34,10,27,12,24,53,60,21,11,73,89,72,96,90,72,49,54,34,38,98,42,4,82,
            37,33,53,71,84,1,57,46,52,20,20,78,65,16,92,63,31,52,8,6,89,10,2,35,51,20,75,92,67,69,43,23,7,31,31,33,67,80,
            28,79,31,57,61,14,17,59,48,97,98,91,53,28,32,4,79,77,57,28,32,72,93,74,54,59,90,50,16,61,85,88,
            86,32,91,78,96,90,59,20,67,80,36,33,51,97,58,37,33,16,19,0,27,66,35,84,97,95,84,61,23,31,70,50,66,0,88,
            231,188,185,158,195,199,241,153,192,151,250,183,169,223,217,228,242,223,188,196,244,206,213,242,231,211,197,
            223,154,249,157,235,244,158,200,157,179,214,227,175,170,155,161,217,222,199,245,237,172,202,243,150,184,176
            ,221,215,189,187,178,171,208,183,207,213,246,217,155,241,188,169,244,168,189,236,236,239,158,173,184,153,214
            ,165,243,178,160,221,172,246,170,181,214,219,190,221,205,195,197,200,151,178,184,226,159,177,247,245,188,226
            ,181,229,175,236,172,204,153,183,179,230,180,232,230,216,231,211,158,202,165,236,202,217,151,237,153,194,169,
            152,238,213,214,180,177,157,174,215,160,238,195,154,160,150,179,227,172,173,183,167,216,236,183,212,175,243,
            180,180,165,206,202,247,211,198,177,179,192,151,169,195,166,241,227,212,216,200,231,175,242,190,186,209,203,
            227,219,236,194,189,219,240,186,237,214,210,247,228,209,243,225,249,234,163,178,153,188,185,
            235,171,187,201,228,159,218,220,220,188,241,235,192,200,198,167,168,168,247,152,211,206,233,152,154,235,212,
            166,250,204,189,170,242,217,183,171,242,183,225,246,229,213,191,233,201,177,158,214,229,219,182,184,214,232,
            244,248,182,209,183,181,227,212,230,156,230,155,191,197,244,231,243,190,198,201,233,184,173,177,208,219,248,
            241,209,159,200,189,151,202,177,170,152,214,200,209,224,160,226,169,203,234,189,153,196,237,178,242,172,187,
            172,206,225,218,227,197,193,248,227,241,197,223,195,157,165,163,194,244,223,242,204,155,176,219,159,158,239,
            203,164,230,154,249,213,177,174,215,244,190,233,171,233,172,161,172,155,193,163,197,196,213,163,234,246,158,
            196,200,197,220,215,220,202,172,154,234,234,204,200,184,244,239,199,172,214,165,203,221,195,186,198,231,183,
            177,162,180,162,167,184,235,174,176,222,187,170,209,198,188,250,166,175,212,209,198,204,180,206,245,174,199
            ,186,166,171,173,237,187,232,191,226,231,160,237,235,219,206,228,151,192,213,192,157,242,171,239,215,151,195,
            219,154,248,164,175,221,211,232,213,201,167,193,236,170,204,157,198,244,182,158,209,152,239,182,175,204,222,
            234,210,179,232,240,152,237,244,232,187,226,218,180,182,247,151,225,191,222,191,242,213,225,223,183,197,169,
            238,157,239};
    int threshold = histogram_analysis(window);
    TEST_ASSERT_EQUAL_INT(100, threshold);
}

/*
void test_histogram_NeedToImplement(void)
{
    int window[1024] = {
            11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,250,249,248,247,246,245,244,243,242,241,240,239,238,237,236,235,
            11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,250,249,248,247,246,245,244,243,242,241,240,239,238,237,236,235,
            11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,250,249,248,247,246,245,244,243,242,241,240,239,238,237,236,235,
            11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,250,249,248,247,246,245,244,243,242,241,240,239,238,237,236,235,
            11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,250,249,248,247,246,245,244,243,242,241,240,239,238,237,236,235,
            11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,250,249,248,247,246,245,244,243,242,241,240,239,238,237,236,235,
            11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,250,249,248,247,246,245,244,243,242,241,240,239,238,237,236,235,
            11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,250,249,248,247,246,245,244,243,242,241,240,239,238,237,236,235,
            11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,250,249,248,247,246,245,244,243,242,241,240,239,238,237,236,235,
            11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,250,249,248,247,246,245,244,243,242,241,240,239,238,237,236,235,
            11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,250,249,248,247,246,245,244,243,242,241,240,239,238,237,236,235,
            11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,250,249,248,247,246,245,244,243,242,241,240,239,238,237,236,235,
            11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,250,249,248,247,246,245,244,243,242,241,240,239,238,237,236,235,
            11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,250,249,248,247,246,245,244,243,242,241,240,239,238,237,236,235,
            11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,250,249,248,247,246,245,244,243,242,241,240,239,238,237,236,235,
            11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,250,249,248,247,246,245,244,243,242,241,240,239,238,237,236,235,
            11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,250,249,248,247,246,245,244,243,242,241,240,239,238,237,236,235,
            11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,250,249,248,247,246,245,244,243,242,241,240,239,238,237,236,235,
            11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,250,249,248,247,246,245,244,243,242,241,240,239,238,237,236,235,
            11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,250,249,248,247,246,245,244,243,242,241,240,239,238,237,236,235,
            11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,250,249,248,247,246,245,244,243,242,241,240,239,238,237,236,235,
            11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,250,249,248,247,246,245,244,243,242,241,240,239,238,237,236,235,
            11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,250,249,248,247,246,245,244,243,242,241,240,239,238,237,236,235,
            11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,250,249,248,247,246,245,244,243,242,241,240,239,238,237,236,235,
            11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,250,249,248,247,246,245,244,243,242,241,240,239,238,237,236,235,
            11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,250,249,248,247,246,245,244,243,242,241,240,239,238,237,236,235,
            11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,250,249,248,247,246,245,244,243,242,241,240,239,238,237,236,235,
            11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,250,249,248,247,246,245,244,243,242,241,240,239,238,237,236,235,
            11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,250,249,248,247,246,245,244,243,242,241,240,239,238,237,236,235,
            11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,250,249,248,247,246,245,244,243,242,241,240,239,238,237,236,235,
            11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,250,249,248,247,246,245,244,243,242,241,240,239,238,237,236,235,
            11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,250,249,248,247,246,245,244,243,242,241,240,239,238,237,236,235
    };
    int res = histogram_analysis(window, 32, 255);
    TEST_ASSERT_EQUAL_INT(0,res);
}
*/